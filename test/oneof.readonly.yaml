openapi: 3.0.0
info:
  title: Dummy API
  description: Dummy API
  version: "0.1.0"
servers:
  - url: /v1
paths:
  '/orders':
    post:
      requestBody:
        content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/subA'
                  - $ref: '#/components/schemas/subB'
                discriminator:
                  propertyName: type
                  mapping:
                    A: '#/components/schemas/subA'
                    B: '#/components/schemas/subB'
      responses:
          200:
            description: successful operation

components:
  schemas:
    common:
      type: object
      properties:
        id:
          readOnly: true
          type: string
        type:
          type: string
          enum: [A, B]          
      required:
        - id
        - type  

    subA:
      allOf:
        - $ref: '#/components/schemas/common'
        # - type: object
        #   properties:
        #     id:
        #       readOnly: true
        #       type: string
        #     type:
        #       type: string
        #       enum: [A, B]          
        #   required:
        #     - id
        #     - type  

    subB:
      allOf:
        - $ref: '#/components/schemas/common'
        # - type: object
        #   properties:
        #     id:
        #       readOnly: true
        #       type: string
        #     type:
        #       type: string
        #       enum: [A, B]          
        #   required:
        #     - id
        #     - type  